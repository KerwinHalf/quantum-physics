<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜ç­‰é‡å­åŠ›å­¦ - è¯¾ç¨‹æ€»è§ˆ</title>
    <script>
    MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] } };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: "Segoe UI", Arial, sans-serif; line-height: 1.6; color: #333; background-color: #f4f6f9; margin: 0; }
        .header { background-color: #2c3e50; color: white; padding: 20px; text-align: center; }
        .header h1 { margin: 0; font-size: 1.8em; }
        
        .layout { display: flex; max-width: 1200px; margin: 20px auto; gap: 30px; padding: 0 20px; }
        
        /* ä¾§è¾¹æ æ ·å¼å‡çº§ */
        .sidebar { width: 300px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); height: 85vh; position: sticky; top: 20px; overflow-y: auto; }
        .sidebar h3 { color: #2c3e50; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        /* ç›®å½•ä¸­çš„å¤§ç« èŠ‚æ ‡é¢˜ */
        .chapter-label { font-weight: bold; color: #3498db; margin-top: 15px; margin-bottom: 5px; padding-left: 5px; font-size: 1.05em; }
        
        /* ç›®å½•ä¸­çš„è¯•å·é“¾æ¥ */
        .toc-link { display: block; padding: 8px 15px; color: #666; text-decoration: none; border-radius: 5px; transition: 0.2s; font-size: 0.9em; border-left: 3px solid transparent; }
        .toc-link:hover { background-color: #eaf2f8; color: #3498db; border-left: 3px solid #3498db; }

        .content { flex: 1; min-width: 0; }
        
        /* å†…å®¹åŒºçš„ç« èŠ‚åˆ†å‰²çº¿ */
        .chapter-divider { margin-top: 40px; margin-bottom: 20px; border-bottom: 2px dashed #bdc3c7; padding-bottom: 10px; }
        .chapter-divider h2 { color: #7f8c8d; margin: 0; }

        .exam-section { background: white; padding: 30px; margin-bottom: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); scroll-margin-top: 20px; }
        .exam-section h2 { color: #2c3e50; border-left: 5px solid #3498db; padding-left: 15px; margin-top: 0; }
        
        .question-box { background-color: #f9f9f9; border: 1px solid #eee; padding: 15px; margin-bottom: 15px; border-radius: 6px; }
        details { margin-top: 10px; }
        summary { cursor: pointer; color: #e67e22; font-weight: bold; }
        .answer { margin-top: 10px; padding: 15px; background-color: #e8f8f5; border-left: 4px solid #2ecc71; }
        .teacher-note { margin-top: 10px; font-size: 0.9em; background: #fff8e1; padding: 10px; border-radius: 4px; color: #8a6d3b; }

        @media (max-width: 768px) { .layout { flex-direction: column; } .sidebar { width: auto; height: auto; position: static; } }
    </style>
</head>
<body>

<div class="header">
    <h1>é«˜ç­‰é‡å­åŠ›å­¦é€šå…³å®å…¸</h1>
    <p>Theory of Density Matrix & Quantum Dynamics</p>
</div>

<div class="layout">
    <!-- å·¦ä¾§ç›®å½• -->
    <div class="sidebar">
        <h3>ğŸ“š è¯¾ç¨‹ç›®å½•</h3>
        <div id="toc-container"></div>
    </div>

    <!-- å³ä¾§å†…å®¹ -->
    <div class="content" id="exam-container"></div>
</div>

<script src="questions.js"></script>
<script>
    const tocContainer = document.getElementById('toc-container');
    const examContainer = document.getElementById('exam-container');

    if (typeof courseData === 'undefined') {
        examContainer.innerHTML = '<p style="color:red;">é”™è¯¯ï¼šè¯·ç¡®ä¿ questions.js æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®ã€‚</p>';
    } else {
        // åŒé‡å¾ªç¯ï¼šç¬¬ä¸€å±‚å¾ªç¯â€œç« â€ï¼Œç¬¬äºŒå±‚å¾ªç¯â€œè¯•å·â€
        courseData.forEach((chapter, cIndex) => {
            
            // 1. åœ¨å·¦ä¾§ç›®å½•æ·»åŠ â€œç« èŠ‚æ ‡é¢˜â€
            const chapterLabel = document.createElement('div');
            chapterLabel.className = 'chapter-label';
            chapterLabel.innerText = chapter.chapterTitle;
            tocContainer.appendChild(chapterLabel);

            // 2. åœ¨å³ä¾§å†…å®¹åŒºæ·»åŠ ä¸€ä¸ªâ€œç« èŠ‚åˆ†å‰²æ ‡é¢˜â€ï¼ˆå¯é€‰ï¼Œå¢åŠ ç¾è§‚ï¼‰
            const chapterDivider = document.createElement('div');
            chapterDivider.className = 'chapter-divider';
            chapterDivider.innerHTML = `<h2>${chapter.chapterTitle}</h2>`;
            examContainer.appendChild(chapterDivider);

            // 3. éå†è¯¥ç« èŠ‚ä¸‹çš„æ‰€æœ‰è¯•å·
            chapter.exams.forEach((exam, eIndex) => {
                const examId = `exam-${cIndex}-${eIndex}`; // ç”Ÿæˆå”¯ä¸€ID

                // --- ç›®å½•é“¾æ¥ ---
                const link = document.createElement('a');
                link.className = 'toc-link';
                link.href = `#${examId}`;
                link.innerText = exam.title; // åªæ˜¾ç¤ºè¯•å·æ ‡é¢˜
                tocContainer.appendChild(link);

                // --- è¯•å·å†…å®¹å¡ç‰‡ ---
                const section = document.createElement('div');
                section.className = 'exam-section';
                section.id = examId;

                // è¯•å·æ ‡é¢˜
                const h2 = document.createElement('h2');
                h2.innerText = exam.title;
                section.appendChild(h2);

                // é¢˜ç›®å¾ªç¯
                exam.questions.forEach((q, qIndex) => {
                    const box = document.createElement('div');
                    box.className = 'question-box';
                    box.innerHTML = `
                        <p><strong>Q${qIndex + 1}:</strong> ${q.q}</p>
                        <details>
                            <summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>
                            <div class="answer">
                                <p><strong>${q.a}</strong></p>
                                <p>${q.detail}</p>
                                <div class="teacher-note">
                                    ğŸ’¡ <strong>ç‚¹è¯„ï¼š</strong> ${q.note}
                                </div>
                            </div>
                        </details>
                    `;
                    section.appendChild(box);
                });

                examContainer.appendChild(section);
            });
        });
    }
</script>

</body>
</html>